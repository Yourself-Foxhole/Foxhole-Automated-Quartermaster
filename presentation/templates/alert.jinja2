{
  "title": "{% if alert_type == 'critical' %}ğŸš¨{% elif alert_type == 'warning' %}âš ï¸{% elif alert_type == 'info' %}â„¹ï¸{% else %}ğŸ“¢{% endif %} {{ alert_title }}",
  "description": "{{ alert_message }}",
  "color": {% if alert_type == "critical" %}15158332{% elif alert_type == "warning" %}16776960{% elif alert_type == "info" %}3447003{% else %}6777215{% endif %},
  "fields": [
    {
      "name": "ğŸ·ï¸ Alert Type",
      "value": "{{ alert_type|title }}",
      "inline": true
    },
    {
      "name": "ğŸ“ Location",
      "value": "{{ location if location else 'Multiple Locations' }}",
      "inline": true
    },
    {
      "name": "â° Priority",
      "value": "{{ priority|title if priority else 'Normal' }}",
      "inline": true
    }{% if affected_items %},
    {
      "name": "ğŸ“¦ Affected Items",
      "value": "{% for item in affected_items %}â€¢ {{ item }}{% if not loop.last %}\n{% endif %}{% endfor %}",
      "inline": false
    }{% endif %}{% if supply_shortage %},
    {
      "name": "ğŸ“‰ Supply Shortage",
      "value": "{% for item, shortage in supply_shortage.items() %}**{{ item }}:** {{ shortage }} needed{% if not loop.last %}\n{% endif %}{% endfor %}",
      "inline": false
    }{% endif %}{% if recommended_actions %},
    {
      "name": "ğŸ’¡ Recommended Actions",
      "value": "{% for action in recommended_actions %}{{ loop.index }}. {{ action }}{% if not loop.last %}\n{% endif %}{% endfor %}",
      "inline": false
    }{% endif %}{% if frontline_impact %},
    {
      "name": "âš”ï¸ Frontline Impact", 
      "value": "{{ frontline_impact }}",
      "inline": false
    }{% endif %}{% if estimated_resolution %},
    {
      "name": "â±ï¸ Estimated Resolution",
      "value": "{{ estimated_resolution }}",
      "inline": true
    }{% endif %}{% if assigned_to %},
    {
      "name": "ğŸ‘¤ Assigned To",
      "value": "{{ assigned_to }}",
      "inline": true
    }{% endif %}
  ],
  "footer": {
    "text": "Alert #{{ alert_id if alert_id else 'N/A' }} â€¢ Foxhole Automated Quartermaster"
  },
  "timestamp": "{{ timestamp.isoformat() if timestamp else 'now'|replace('now', '') }}"
}